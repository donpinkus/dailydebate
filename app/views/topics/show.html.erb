<%= notice %>
<br/>

<div id="topic">
	<header>
		<div class="btn-group pull-right">
			<% if @topic.user == current_user %>
				<%= link_to edit_topic_path(@topic), class: "btn btn-default btn-sm" do %>
					<i class="glyphicon glyphicon-pencil"></i>
					Edit
				<% end %>
			<% end %>
		</div>

		<h1><%= @topic.title %></h1>

		<% if @topic.comments.count > 0 %>
			<div id="navigator">
				<div class="hovers"></div>
				<div class="line"></div>
				<div class="labels"></div>
				<ul class="marks">
					<% @topic.comments.each do |e| %>
						<% left = ((e.date - @start_date) / @total_time_length) * 928 - 5 %>
						<a href="#<%= e.title.parameterize %>">
							<li style="left: <%= left %>px">
								<small class="date <%= e.date == @start_date ? '' : 'hidden' %>">
									<%= e.date.strftime("%B %d, %Y") %>
								</small>
							</li>
						</a>
					<% end %>
				</ul>
			</div>
		<% end %>
	</header>

	<hr/>

	<main>

	</main>
</div>

<!-- Add comment modal -->
<div class="modal fade" id="addCommentModal">
  <div class="modal-dialog">
    <div class="modal-content">
    	<%= form_for Comment.new do |f| %>
	      <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal">
	        	<span aria-hidden="true">&times;</span>
	        </button>
	        <h4 class="modal-title">Add Comment</h4>
	      </div>
	      <div class="modal-body">
        	<%= f.hidden_field :topic_id, value: @topic.id %>
        	<div class="form-group">
        		<%= f.label :content %>
        		<a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet" target="_blank" class="pull-right">Formatting</a>
        		<%= f.text_area :content, rows: 6, class: "form-control" %>
        	</div>
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
	        <%= f.submit "Publish", class: "btn btn-primary" %>
	      </div>
	    <% end %>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

