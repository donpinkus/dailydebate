<div class="container">
	<header class="row">
		<div class="col-sm-12">
			<%= notice %>

			<div class="btn-group pull-right">
				<% if @topic.user == current_user %>
					<%= link_to topic_path(@topic), method: "delete", class: "btn btn-danger btn-sm" do %>
						<i class="glyphicon glyphicon-remove"></i>
						Delete Topic
					<% end %>
				<% end %>
			</div>

			<br/>

			<h1><%= @topic.title %></h1>
			<p><%= @topic.user.name %> &middot; <%= time_ago_in_words(@topic.created_at) %> ago</p>

			<%= render partial: "vote_buttons_and_form", locals: {topic: @topic} %>

		</div>
	</header>
	<main class="row">
		<div class="col-sm-6">
			<h2 class="greenText">Agree</h2>
			<section class="comments">
				<% if @agree_comments.count > 0 %>
					<% @topic.comments.where(is_agree: true).each do |c| %>
						<%= render partial: "comment", locals: {is_agree: true, c: c} %>
					<% end %>
				<% else %>
					<h4 class="text-muted">No comments for "agree".</h4>
				<% end %>
			</div>
		</section>
		<div class="col-sm-6">
			<h2 class="redText">Disagree</h2>
			<section class="comments">
				<% if @disagree_comments.count > 0 %>
					<% @topic.comments.where(is_agree: false).each do |c| %>
						<%= render partial: "comment", locals: {is_agree: false, c: c} %>
					<% end %>
				<% else %>
					<h4 class="text-muted">No comments for "disagree".</h4>
				<% end %>
			</section>
		</div>
	</main>
</div>

<!-- Add comment modal -->
<div class="modal fade" id="addCommentModal">
  <div class="modal-dialog">
    <div class="modal-content">
    	<%= form_for Comment.new do |f| %>
	      <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal">
	        	<span aria-hidden="true">&times;</span>
	        </button>
	        <h4 class="modal-title">Add Comment</h4>
	      </div>
	      <div class="modal-body">
        	<%= f.hidden_field :topic_id, value: @topic.id %>
        	<div class="form-group">
        		<%= f.label :content %>
        		<a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet" target="_blank" class="pull-right">Formatting</a>
        		<%= f.text_area :content, rows: 6, class: "form-control" %>
        	</div>
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
	        <%= f.submit "Publish", class: "btn btn-primary" %>
	      </div>
	    <% end %>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

